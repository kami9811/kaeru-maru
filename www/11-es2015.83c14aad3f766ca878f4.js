(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{G8VQ:function(t,o,n){"use strict";n.r(o),n.d(o,"BattlePageModule",(function(){return p}));var e=n("ofXK"),i=n("3Pt+"),s=n("TEn/"),a=n("tyNb"),c=n("fXoL"),b=n("dVwY"),h=n("Bfh1"),r=n("a/9d");const g=[{path:"",component:(()=>{class t{constructor(t,o,n,e){this.router=t,this.gs=o,this.geolocation=n,this.camera=e,this.latitude=0,this.longitude=0,this.isgoal=!1,this.spot=0,this.spot_opponent=0,this.information_flag=!1,this.postObj={},this.returnObj={},this.takeCamera=()=>{this.camera.getPicture({quality:100,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE}).then(t=>{},t=>{})},this.getInfo=()=>{this.information_flag=!0,this.getTime(),this.getDistance(),this.getNumSpot()},this.getTime=()=>{this.postObj.id=localStorage.id,this.postObj.hash=localStorage.hash,this.gs.http("https://kn46itblog.com/hackathon/yamaguchi2020/php_apis/battle/show/time",this.postObj).subscribe(t=>{console.log(t),this.returnObj=t,200==t.status&&(this.hour=t.hour,this.minute=t.minute,this.second=t.second)},t=>console.error(t))},this.getDistance=()=>{this.geolocation.getCurrentPosition().then(t=>{this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,this.postObj.id=localStorage.id,this.postObj.latitude=this.latitude,this.postObj.longitude=this.longitude,this.postObj.hash=localStorage.hash,this.gs.http("https://kn46itblog.com/hackathon/yamaguchi2020/php_apis/battle/show/distance",this.postObj).subscribe(t=>{console.log(t),this.returnObj=t,200==t.status&&(this.distance=t.distance,this.distance_opponent=t.distance_opponent)},t=>console.error(t))})},this.getIsGoal=()=>{this.postObj.id=localStorage.id,this.postObj.goal_code=this.goalcode,this.postObj.hash=localStorage.hash,this.gs.http("https://kn46itblog.com/hackathon/yamaguchi2020/php_apis/battle/show/goal",this.postObj).subscribe(t=>{console.log(t),this.returnObj=t,200==t.status&&1==t.goal&&(this.isgoal=!0,this.router.navigate(["/result",t.score]))},t=>console.error(t))},this.getNumSpot=()=>{this.postObj.id=localStorage.id,this.postObj.hash=localStorage.hash,this.postObj.spot=this.spot;const t=this.postObj;console.log(t),this.gs.http("https://kn46itblog.com/hackathon/yamaguchi2020/php_apis/battle/show/spot",t).subscribe(t=>{console.log(t),this.returnObj=t,200==t.status&&(this.spot_opponent=t.spot_opponent)},t=>console.error(t))}}ngOnInit(){this.postObj.id=localStorage.id,this.postObj.password=localStorage.password,this.gs.http("https://kn46itblog.com/hackathon/yamaguchi2020/php_apis/user/edit/login",this.postObj).subscribe(t=>{this.returnObj=t,200==this.returnObj.status?(localStorage.hash=this.returnObj.hash,this.getInfo()):this.router.navigate(["/login"])},t=>console.error(t)),this.interval=setInterval(()=>{0==this.information_flag&&this.getInfo()},1500)}}return t.\u0275fac=function(o){return new(o||t)(c.Hb(a.g),c.Hb(b.a),c.Hb(h.a),c.Hb(r.a))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-battle"]],decls:63,vars:10,consts:[[3,"translucent"],["color","main"],["id","icon","src","../../assets/icon/icon_rect.png"],[1,"battle"],[1,"txt-status"],[1,"bg","bg-red"],[1,"bg","bg-mint"],["expand","block","color","main","fill","outline",1,"ion-text-center",3,"click"],["name","camera"],[1,"extra"],["name","checkmark-circle-outline"],["name","ellipse-outline"],[3,"submit"],[1,"senshin"],["required","","type","text","name","goalcode",3,"ngModel","ngModelChange"],["type","submit","expand","block","color","main",1,"ion-text-center"],["name","home"]],template:function(t,o){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar",1),c.Mb(2,"ion-title"),c.Ib(3,"ion-img",2),c.Lb(),c.Lb(),c.Lb(),c.Mb(4,"ion-content"),c.Mb(5,"div",3),c.Mb(6,"ion-text"),c.Mb(7,"h4",4),c.gc(8,"\u3042\u306a\u305f\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),c.Lb(),c.Lb(),c.Mb(9,"div",5),c.Mb(10,"p"),c.gc(11,"\u79fb\u52d5\u6642\u9593\uff1a"),c.Mb(12,"span"),c.gc(13),c.Lb(),c.Lb(),c.Mb(14,"p"),c.gc(15,"\u76f4\u7dda\u79fb\u52d5\u6642\u901f\uff1a"),c.Mb(16,"span"),c.gc(17),c.Lb(),c.Lb(),c.Mb(18,"p"),c.gc(19,"\u30b4\u30fc\u30eb\uff1a "),c.Mb(20,"span"),c.gc(21),c.Lb(),c.Lb(),c.Mb(22,"p"),c.gc(23,"\u5bc4\u308a\u9053\u6570\uff1a"),c.Mb(24,"span"),c.gc(25),c.Lb(),c.Lb(),c.Lb(),c.Mb(26,"ion-text"),c.Mb(27,"h4",4),c.gc(28,"\u76f8\u624b\u306e\u30b9\u30c6\u30fc\u30bf\u30b9"),c.Lb(),c.Lb(),c.Mb(29,"div",6),c.Mb(30,"p"),c.gc(31,"\u79fb\u52d5\u6642\u9593\uff1a"),c.Ib(32,"span"),c.Lb(),c.Mb(33,"p"),c.gc(34,"\u76f4\u7dda\u79fb\u52d5\u6642\u901f\uff1a"),c.Mb(35,"span"),c.gc(36),c.Lb(),c.Lb(),c.Mb(37,"p"),c.gc(38,"\u30b4\u30fc\u30eb"),c.Ib(39,"span"),c.Lb(),c.Mb(40,"p"),c.gc(41,"\u5bc4\u308a\u9053\u6570\uff1a"),c.Mb(42,"span"),c.gc(43),c.Lb(),c.Lb(),c.Lb(),c.Mb(44,"ion-button",7),c.Tb("click",(function(){return o.takeCamera()})),c.Ib(45,"ion-icon",8),c.gc(46,"\u2003\u5bc4\u308a\u9053\u5199\u771f\u3092\u64ae\u5f71"),c.Lb(),c.Mb(47,"ul",9),c.Mb(48,"li"),c.Ib(49,"ion-icon",10),c.gc(50,"\u2003\u30de\u30af\u30c9\u30ca\u30eb\u30c9"),c.Lb(),c.Mb(51,"li"),c.Ib(52,"ion-icon",11),c.gc(53,"\u2003\u30b9\u30bf\u30fc\u30d0\u30c3\u30af\u30b9"),c.Lb(),c.Lb(),c.Mb(54,"form",12),c.Tb("submit",(function(){return o.getIsGoal()})),c.Mb(55,"div",13),c.Mb(56,"ion-text"),c.Mb(57,"h4",4),c.gc(58,"\u30bb\u30f3\u30b7\u30f3\u541b\u306b\u8868\u793a\u3055\u308c\u308b\u756a\u53f7"),c.Lb(),c.Lb(),c.Mb(59,"ion-input",14),c.Tb("ngModelChange",(function(t){return o.goalcode=t})),c.Lb(),c.Lb(),c.Mb(60,"ion-button",15),c.Ib(61,"ion-icon",16),c.gc(62,"\u2003\u30b4\u30fc\u30eb\uff01"),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.Yb("translucent",!0),c.xb(13),c.jc("",o.hour,":",o.minute,":",o.second,""),c.xb(4),c.hc(o.distance),c.xb(4),c.hc(o.isgoal),c.xb(4),c.hc(o.spot),c.xb(11),c.hc(o.distance_opponent),c.xb(7),c.hc(o.spot_opponent),c.xb(16),c.Yb("ngModel",o.goalcode))},directives:[s.o,s.C,s.B,s.q,s.m,s.z,s.e,s.p,i.i,i.e,i.f,s.r,s.J,i.h,i.d,i.g],styles:["#icon[_ngcontent-%COMP%]{height:100px;width:100px}.battle[_ngcontent-%COMP%]{margin:0 5%}.battle[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:1;font-size:.9em}.battle[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{padding:5px;color:var(--ion-color-main-contrast);font-weight:700}.battle[_ngcontent-%COMP%]   .bg-red[_ngcontent-%COMP%]{background-color:var(--ion-color-main)}.battle[_ngcontent-%COMP%]   .bg-mint[_ngcontent-%COMP%]{background-color:var(--ion-color-sub)}.battle[_ngcontent-%COMP%]   .bg-mint[_ngcontent-%COMP%], .battle[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]{margin-bottom:40px}.battle[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.battle[_ngcontent-%COMP%]   .senshin[_ngcontent-%COMP%]{margin-bottom:40px}.battle[_ngcontent-%COMP%]   .senshin[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-left:3%}"]}),t})()}];let l=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(o){return new(o||t)},imports:[[a.i.forChild(g)],a.i]}),t})(),p=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(o){return new(o||t)},imports:[[e.b,i.a,s.D,l]]}),t})()}}]);